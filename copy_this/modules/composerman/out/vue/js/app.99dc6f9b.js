(function(t){function e(e){for(var n,i,s=e[0],c=e[1],u=e[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==r[c]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},o=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/modules/composerman/out/vue/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("v-app-bar",{attrs:{app:"",color:"indigo",dark:""}},[a("v-toolbar-title",[t._v("Paketverwaltung")]),a("v-spacer"),a("CommandDialog")],1),a("v-content",[a("v-container",{staticClass:"fill-height"},[a("v-row",[a("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[a("PackageList")],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("PackageForm")],1)],1)],1)],1),a("v-footer",{attrs:{color:"indigo",app:""}},[a("span",{staticClass:"white--text"},[t._v("© 2020 "),a("a",{attrs:{href:"https://www.aggrosoft.de"}},[t._v("Aggrosoft GmbH")])])])],1)},o=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-data-table",{attrs:{items:t.packages,headers:t.headers,loading:t.loading},scopedSlots:t._u([{key:"item.version",fn:function(e){var n=e.item;return[a("v-chip",[t._v(" "+t._s(n.version)+" ")])]}},{key:"item.latest",fn:function(e){var n=e.item;return[a("v-chip",{attrs:{color:t.versionColor(n)}},[t._v(" "+t._s(n.latest)+" ")])]}},{key:"item.latest-status",fn:function(e){var n=e.item;return[a("span",{domProps:{innerHTML:t._s(t.statusText(n))}})]}},{key:"item.action",fn:function(e){var n=e.item;return[a("v-btn",t._g({staticClass:"mr-lg-2",attrs:{fab:"",color:t.isUpdatable(n)?"primary":"",text:"",icon:"",small:""},on:{click:function(e){return e.stopPropagation(),t.clickUpdatePackage(n)}}},t.on),[a("v-icon",[t._v(" mdi-refresh ")])],1)]}}])})],1)},s=[],c=(a("b0c0"),a("5530")),u=a("2f62"),l={name:"PackageList",mounted:function(){console.log("init!"),this.initPackages()},data:function(){return{headers:[{text:"Titel",value:"name"},{text:"Version",value:"version"},{text:"Neueste Version",value:"latest"},{text:"Status",value:"latest-status"},{text:"Beschreibung",value:"description"},{text:"Aktionen",value:"action",sortable:!1}]}},computed:Object(c["a"])({},Object(u["c"])(["packages","loading"])),methods:Object(c["a"])({versionColor:function(t){return"semver-safe-update"===t["latest-status"]?"green":"update-possible"===t["latest-status"]?"orange":void 0},statusText:function(t){return"semver-safe-update"===t["latest-status"]?"Sicheres Update":"update-possible"===t["latest-status"]?"Update möglich":"up-to-date"===t["latest-status"]?"Aktuell":t["latest-status"]},isUpdatable:function(t){return"up-to-date"!==t["latest-status"]},clickUpdatePackage:function(t){this.updatePackage(t.name)}},Object(u["b"])(["initPackages","updatePackage"]))},p=l,d=a("2877"),m=a("6544"),f=a.n(m),v=a("8336"),g=a("cc20"),h=a("8fea"),b=a("132d"),k=Object(d["a"])(p,i,s,!1,null,"b3089358",null),w=k.exports;f()(k,{VBtn:v["a"],VChip:g["a"],VDataTable:h["a"],VIcon:b["a"]});var x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"10"}},[a("v-autocomplete",{attrs:{items:t.items,loading:t.isLoading,"search-input":t.search,"hide-no-data":"","hide-selected":"","item-text":"name","item-value":"name",label:"Paket wählen",placeholder:"Geben Sie den Paketnamen ein um zu Suchen","prepend-icon":"mdi-database-search","return-object":!1},on:{"update:searchInput":function(e){t.search=e},"update:search-input":function(e){t.search=e}},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-btn",{attrs:{color:"primary"}},[t._v(" Paket hinzufügen ")])],1)],1)],1)],1)},P=[],_=(a("99af"),a("d3b7"),a("ac1f"),a("841c"),a("ddb0"),a("bc3a")),y=a.n(_),V=y.a.create(),C={name:"PackageForm",data:function(){return{entries:[],isLoading:!1,model:null,search:null}},computed:{items:function(){return this.search?this.entries.concat([{name:this.search}]):this.entries}},watch:{search:function(t){var e=this;this.timeout&&clearTimeout(this.timeout),t&&(this.isLoading=!0,this.timeout=setTimeout((function(){e.apiQuery()}),400))}},methods:{apiQuery:function(){var t=this;V.get("https://packagist.org/search.json",{params:{q:this.search}}).then((function(e){var a=e.data,n=a.total,r=a.results;t.count=n,t.entries=r})).catch((function(t){console.log(t)})).finally((function(){return t.isLoading=!1}))}}},j=C,O=a("c6a6"),T=a("62ad"),S=a("a523"),L=a("4bd4"),R=a("0fd9"),A=Object(d["a"])(j,x,P,!1,null,"b5ff1d68",null),D=A.exports;f()(A,{VAutocomplete:O["a"],VBtn:v["a"],VCol:T["a"],VContainer:S["a"],VForm:L["a"],VRow:R["a"]});var F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{value:t.value,width:"1000"},on:{input:t.onInput},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{color:"deep-orange",fab:""}},n),[a("v-icon",[t._v("mdi-console")])],1)]}}])},[a("v-card",[a("v-card-title",{staticClass:"headline",attrs:{"primary-title":""}},[t._v(" Composer Kommando ausführen ")]),a("v-card-text",[t._v(" Geben Sie ein beliebiges Composer Kommando ein, weitere Informationen finden Sie in der "),a("a",{attrs:{href:"https://getcomposer.org/doc/03-cli.md",target:"_blank"}},[t._v("Dokumentation")]),a("v-text-field",{staticClass:"mt-3",attrs:{label:"Kommando",placeholder:"z.B. composer update",outlined:""},model:{value:t.cmd,callback:function(e){t.cmd=e},expression:"cmd"}}),t.output?a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.output,expression:"output"}],staticClass:"pa-3 blue-grey darken-4 white--text",staticStyle:{width:"100%"},attrs:{readonly:"",rows:"5"},domProps:{value:t.output},on:{input:function(e){e.target.composing||(t.output=e.target.value)}}}):t._e()],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.submitCommand}},[t._v(" Ausführen ")])],1)],1)],1)},B=[],I=(a("96cf"),a("1da1")),U={name:"CommandDialog",props:["value"],data:function(){return{cmd:"",output:!1}},methods:Object(c["a"])({onInput:function(t){this.$emit("input",t)},submitCommand:function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.output=!1,t.next=3,this.runCommand(this.cmd);case 3:this.output=t.sent;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},Object(u["b"])(["runCommand"]))},$=U,M=a("b0af"),E=a("99d9"),z=a("169a"),G=a("ce7e"),K=a("2fa4"),H=a("8654"),J=Object(d["a"])($,F,B,!1,null,"6583e7be",null),N=J.exports;f()(J,{VBtn:v["a"],VCard:M["a"],VCardActions:E["a"],VCardText:E["b"],VCardTitle:E["c"],VDialog:z["a"],VDivider:G["a"],VIcon:b["a"],VSpacer:K["a"],VTextField:H["a"]});var Q={components:{CommandDialog:N,PackageForm:D,PackageList:w}},q=Q,W=a("7496"),X=a("40dc"),Y=a("a75b"),Z=a("553a"),tt=a("2a7f"),et=Object(d["a"])(q,r,o,!1,null,null,null),at=et.exports;f()(et,{VApp:W["a"],VAppBar:X["a"],VCol:T["a"],VContainer:S["a"],VContent:Y["a"],VFooter:Z["a"],VRow:R["a"],VSpacer:K["a"],VToolbarTitle:tt["a"]});var nt=a("f309");n["a"].use(nt["a"]);var rt=new nt["a"]({}),ot=y.a.create();n["a"].use(u["a"]);var it=null,st=new Promise((function(t){it=t})),ct=new u["a"].Store({getters:{token:function(){return st},loading:function(t){return t.loading},packages:function(t){return t.packages&&t.packages.installed?t.packages.installed:[]}},state:{packages:{},token:void 0,loading:!0},mutations:{setPackages:function(t,e){t.packages=e},setLoading:function(t,e){t.loading=e},setToken:function(t,e){var a=t.token;t.token=e,a!==e&&it(e)}},actions:{setToken:function(t,e){var a=t.commit;a("setToken",e)},initPackages:function(t){var e=t.dispatch,a=t.state;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a.packages.length){t.next=2;break}return t.abrupt("return",e("loadPackages"));case 2:case"end":return t.stop()}}),t)})))()},loadPackages:function(t){var e=t.commit,a=t.getters;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e("setLoading",!0),t.abrupt("return",a.token.then((function(t){return ot.get("/admin/index.php?cl=composerman&fnc=getpackages&stoken="+t).then((function(t){e("setPackages",t.data),e("setLoading",!1)}))})));case 2:case"end":return t.stop()}}),t)})))()},updatePackage:function(t,e){var a=t.commit,n=t.dispatch,r=t.getters;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a("setLoading",!0),t.abrupt("return",r.token.then((function(t){return ot.get("/admin/index.php?cl=composerman&fnc=updatepackage&stoken="+t+"&package="+e).then((function(){return n("loadPackages")}))})));case 2:case"end":return t.stop()}}),t)})))()},runCommand:function(t,e){var a=t.commit,n=t.dispatch,r=t.getters;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a("setLoading",!0),t.abrupt("return",r.token.then((function(t){var a=new FormData;return a.set("stoken",t),a.set("cl","composerman"),a.set("fnc","runcommand"),a.set("cmd",e),ot.post("/admin/index.php",a).then((function(t){return n("loadPackages"),t.data}))})));case 2:case"end":return t.stop()}}),t)})))()}},modules:{}});n["a"].config.productionTip=!1,window.vm=new n["a"]({vuetify:rt,store:ct,render:function(t){return t(at)}}).$mount("#app")}});
//# sourceMappingURL=app.99dc6f9b.js.map