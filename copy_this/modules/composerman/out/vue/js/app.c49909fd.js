(function(e){function t(t){for(var a,i,s=t[0],c=t[1],u=t[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/modules/composerman/out/vue/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"inspire"}},[n("v-app-bar",{attrs:{app:"",color:"indigo",dark:""}},[n("v-toolbar-title",[e._v("Paketverwaltung")]),n("v-spacer"),n("ComposerJsonDialog"),n("CommandDialog")],1),n("v-content",[n("v-container",{staticClass:"fill-height"},[n("v-row",[n("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[n("PackageList")],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("PackageForm")],1)],1)],1)],1),n("v-footer",{attrs:{color:"indigo",app:""}},[n("span",{staticClass:"white--text"},[e._v("© 2020 "),n("a",{attrs:{href:"https://www.aggrosoft.de"}},[e._v("Aggrosoft GmbH")])])])],1)},o=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-data-table",{attrs:{items:e.packages,headers:e.headers,loading:e.loading},scopedSlots:e._u([{key:"item.version",fn:function(t){var a=t.item;return[n("v-chip",[e._v(" "+e._s(a.version)+" ")])]}},{key:"item.latest",fn:function(t){var a=t.item;return[n("v-chip",{attrs:{color:e.versionColor(a)}},[e._v(" "+e._s(a.latest)+" ")])]}},{key:"item.latest-status",fn:function(t){var a=t.item;return[n("span",{domProps:{innerHTML:e._s(e.statusText(a))}})]}},{key:"item.action",fn:function(t){var a=t.item;return[n("v-btn",{staticClass:"mr-lg-2",attrs:{fab:"",color:e.isUpdatable(a)?"primary":"",text:"",icon:"",small:""},on:{click:function(t){return t.stopPropagation(),e.clickUpdatePackage(a)}}},[n("v-icon",[e._v(" mdi-refresh ")])],1),n("v-btn",{attrs:{fab:"",color:"red darken-1",text:"",icon:"",small:""},on:{click:function(t){return t.stopPropagation(),e.clickDeletePackage(a)}}},[n("v-icon",[e._v(" mdi-delete ")])],1)]}}])}),n("ConfirmDialog",{ref:"confirm"})],1)},s=[],c=(n("b0c0"),n("96cf"),n("1da1")),u=n("5530"),l=n("2f62"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{style:{zIndex:e.options.zIndex},attrs:{"max-width":e.options.width},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel(t)}},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-toolbar",{attrs:{dark:"",color:e.options.color,dense:"",flat:""}},[n("v-toolbar-title",{staticClass:"white--text"},[e._v(e._s(e.title))])],1),n("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!e.message,expression:"!!message"}],staticClass:"pa-4"},[e._v(e._s(e.message))]),n("v-card-actions",{staticClass:"pt-0"},[n("v-spacer"),n("v-btn",{attrs:{color:"grey",text:""},nativeOn:{click:function(t){return e.cancel(t)}}},[e._v("Abbruch")]),n("v-btn",{attrs:{color:"primary darken-1",text:""},nativeOn:{click:function(t){return e.agree(t)}}},[e._v("Weiter")])],1)],1)],1)},d=[],m=(n("d3b7"),{name:"ConfirmDialog",data:function(){return{dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"secondary darken-3",width:350,zIndex:200}}},methods:{open:function(e,t,n){var a=this;return this.dialog=!0,this.title=e,this.message=t,this.options=Object.assign(this.options,n),new Promise((function(e,t){a.resolve=e,a.reject=t}))},agree:function(){this.resolve(!0),this.dialog=!1},cancel:function(){this.resolve(!1),this.dialog=!1}}}),f=m,v=n("2877"),g=n("6544"),h=n.n(g),b=n("8336"),k=n("b0af"),w=n("99d9"),x=n("169a"),C=n("2fa4"),y=n("71d9"),V=n("2a7f"),_=Object(v["a"])(f,p,d,!1,null,"43b58e22",null),P=_.exports;h()(_,{VBtn:b["a"],VCard:k["a"],VCardActions:w["a"],VCardText:w["b"],VDialog:x["a"],VSpacer:C["a"],VToolbar:y["a"],VToolbarTitle:V["a"]});var j={name:"PackageList",components:{ConfirmDialog:P},mounted:function(){this.initPackages()},data:function(){return{headers:[{text:"Titel",value:"name"},{text:"Version",value:"version"},{text:"Neueste Version",value:"latest"},{text:"Status",value:"latest-status"},{text:"Beschreibung",value:"description"},{text:"Aktionen",value:"action",sortable:!1}]}},computed:Object(u["a"])({},Object(l["c"])(["packages","loading"])),methods:Object(u["a"])({versionColor:function(e){return"semver-safe-update"===e["latest-status"]?"green":"update-possible"===e["latest-status"]?"orange":void 0},statusText:function(e){return"semver-safe-update"===e["latest-status"]?"Sicheres Update":"update-possible"===e["latest-status"]?"Update möglich":"up-to-date"===e["latest-status"]?"Aktuell":e["latest-status"]},isUpdatable:function(e){return"up-to-date"!==e["latest-status"]},clickUpdatePackage:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.confirm.open("Paket aktualisieren?",'Wollen Sie das gewählte Paket "'+t.name+'" wirklich aktualisieren?');case 2:if(!e.sent){e.next=4;break}this.updatePackage(t.name);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),clickDeletePackage:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.confirm.open("Paket entfernen?",'Wollen Sie das gewählte Paket "'+t.name+'" wirklich löschen? Dieser Vorgang kann das System unbrauchbar machen, es werden nur Pakete vom Typ "oxideshop-module" gelöscht.');case 2:if(!e.sent){e.next=4;break}this.deletePackage(t.name);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},Object(l["b"])(["initPackages","updatePackage","deletePackage"]))},O=j,S=n("cc20"),T=n("8fea"),R=n("132d"),D=Object(v["a"])(O,i,s,!1,null,"be7fbfa0",null),J=D.exports;h()(D,{VBtn:b["a"],VChip:S["a"],VDataTable:T["a"],VIcon:R["a"]});var L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"10"}},[n("v-autocomplete",{attrs:{items:e.items,loading:e.isLoading,"search-input":e.search,"hide-no-data":"","hide-selected":"","item-text":"name","item-value":"name",label:"Paket wählen",placeholder:"Geben Sie den Paketnamen ein um zu Suchen","prepend-icon":"mdi-database-search","return-object":!1},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t}},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1),n("v-col",{attrs:{cols:"2"}},[n("v-btn",{attrs:{color:"primary"}},[e._v(" Paket hinzufügen ")])],1)],1)],1)],1)},I=[],A=(n("99af"),n("ac1f"),n("841c"),n("ddb0"),n("bc3a")),$=n.n(A),E=$.a.create(),B={name:"PackageForm",data:function(){return{entries:[],isLoading:!1,model:null,search:null}},computed:{items:function(){return this.search?this.entries.concat([{name:this.search}]):this.entries}},watch:{search:function(e){var t=this;this.timeout&&clearTimeout(this.timeout),e&&(this.isLoading=!0,this.timeout=setTimeout((function(){t.apiQuery()}),400))}},methods:{apiQuery:function(){var e=this;E.get("https://packagist.org/search.json",{params:{q:this.search}}).then((function(t){var n=t.data,a=n.total,r=n.results;e.count=a,e.entries=r})).catch((function(e){console.log(e)})).finally((function(){return e.isLoading=!1}))}}},F=B,z=n("c6a6"),U=n("62ad"),M=n("a523"),N=n("4bd4"),G=n("0fd9"),K=Object(v["a"])(F,L,I,!1,null,"b5ff1d68",null),W=K.exports;h()(K,{VAutocomplete:z["a"],VBtn:b["a"],VCol:U["a"],VContainer:M["a"],VForm:N["a"],VRow:G["a"]});var H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{value:e.value,width:"1000"},on:{input:e.onInput},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({attrs:{color:"deep-orange",fab:""}},a),[n("v-icon",[e._v("mdi-console")])],1)]}}])},[n("v-card",[n("v-card-title",{staticClass:"headline",attrs:{"primary-title":""}},[e._v(" Composer Kommando ausführen ")]),n("v-card-text",[e._v(" Geben Sie ein beliebiges Composer Kommando ein, weitere Informationen finden Sie in der "),n("a",{attrs:{href:"https://getcomposer.org/doc/03-cli.md",target:"_blank"}},[e._v("Dokumentation")]),n("v-text-field",{staticClass:"mt-3",attrs:{label:"Kommando",placeholder:"z.B. composer update",outlined:""},model:{value:e.cmd,callback:function(t){e.cmd=t},expression:"cmd"}}),e.output?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.output,expression:"output"}],staticClass:"pa-3 blue-grey darken-4 white--text",staticStyle:{width:"100%"},attrs:{readonly:"",rows:"5"},domProps:{value:e.output},on:{input:function(t){t.target.composing||(e.output=t.target.value)}}}):e._e()],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.submitCommand}},[e._v(" Ausführen ")])],1)],1)],1)},Q=[],q={name:"CommandDialog",props:["value"],data:function(){return{cmd:"",output:!1}},methods:Object(u["a"])({onInput:function(e){this.$emit("input",e)},submitCommand:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.output=!1,e.next=3,this.runCommand(this.cmd);case 3:this.output=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Object(l["b"])(["runCommand"]))},X=q,Y=n("ce7e"),Z=n("8654"),ee=Object(v["a"])(X,H,Q,!1,null,"6583e7be",null),te=ee.exports;h()(ee,{VBtn:b["a"],VCard:k["a"],VCardActions:w["a"],VCardText:w["b"],VCardTitle:w["c"],VDialog:x["a"],VDivider:Y["a"],VIcon:R["a"],VSpacer:C["a"],VTextField:Z["a"]});var ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{value:e.value,width:"1000"},on:{input:e.onInput},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({attrs:{color:"deep-orange",fab:""}},a),[n("v-icon",[e._v("mdi-file-cog")])],1)]}}])},[n("v-card",[n("v-card-title",{staticClass:"headline",attrs:{"primary-title":""}},[e._v(" Composer Datei bearbeiten ")]),n("v-card-text",[n("VuePrismEditor",{attrs:{language:"json"},model:{value:e.contents,callback:function(t){e.contents=t},expression:"contents"}})],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.clickSaveComposerJson}},[e._v(" Speichern ")])],1)],1)],1)},ae=[],re=(n("c197"),n("a878"),n("431a")),oe=n.n(re),ie=(n("fdfb"),n("f393"),{name:"ComposerJsonDialog",props:["value"],components:{VuePrismEditor:oe.a},data:function(){return{cmd:"",output:!1}},mounted:function(){this.getComposerJson()},computed:Object(u["a"])({contents:function(){return JSON.stringify(this.composerJson,null,2)}},Object(l["c"])(["composerJson"])),methods:Object(u["a"])({onInput:function(e){this.$emit("input",e)},clickSaveComposerJson:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},Object(l["b"])(["getComposerJson","saveComposerJson"]))}),se=ie,ce=Object(v["a"])(se,ne,ae,!1,null,"7893298e",null),ue=ce.exports;h()(ce,{VBtn:b["a"],VCard:k["a"],VCardActions:w["a"],VCardText:w["b"],VCardTitle:w["c"],VDialog:x["a"],VDivider:Y["a"],VIcon:R["a"],VSpacer:C["a"]});var le={components:{ComposerJsonDialog:ue,CommandDialog:te,PackageForm:W,PackageList:J}},pe=le,de=n("7496"),me=n("40dc"),fe=n("a75b"),ve=n("553a"),ge=Object(v["a"])(pe,r,o,!1,null,null,null),he=ge.exports;h()(ge,{VApp:de["a"],VAppBar:me["a"],VCol:U["a"],VContainer:M["a"],VContent:fe["a"],VFooter:ve["a"],VRow:G["a"],VSpacer:C["a"],VToolbarTitle:V["a"]});var be=n("f309");a["a"].use(be["a"]);var ke=new be["a"]({}),we=$.a.create();a["a"].use(l["a"]);var xe=null,Ce=new Promise((function(e){xe=e})),ye=new l["a"].Store({getters:{token:function(){return Ce},loading:function(e){return e.loading},packages:function(e){return e.packages&&e.packages.installed?e.packages.installed:[]},composerJson:function(e){return e.composerJson}},state:{packages:{},token:void 0,loading:!0,composerJson:""},mutations:{setPackages:function(e,t){e.packages=t},setLoading:function(e,t){e.loading=t},setComposerJson:function(e,t){e.composerJson=t},setToken:function(e,t){var n=e.token;e.token=t,n!==t&&xe(t)}},actions:{setToken:function(e,t){var n=e.commit;n("setToken",t)},initPackages:function(e){var t=e.dispatch,n=e.getters,a=e.commit;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.packages.length){e.next=4;break}return e.abrupt("return",t("loadPackages"));case 4:a("setLoading",!1);case 5:case"end":return e.stop()}}),e)})))()},loadPackages:function(e){var t=e.commit,n=e.getters;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t("setLoading",!0),e.abrupt("return",n.token.then((function(e){return we.get("/admin/index.php?cl=composerman&fnc=getpackages&stoken="+e).then((function(e){t("setPackages",e.data),t("setLoading",!1)}))})));case 2:case"end":return e.stop()}}),e)})))()},updatePackage:function(e,t){var n=e.commit,a=e.dispatch,r=e.getters;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n("setLoading",!0),e.abrupt("return",r.token.then((function(e){return we.get("/admin/index.php?cl=composerman&fnc=updatepackage&stoken="+e+"&package="+t).then((function(){return a("loadPackages")}))})));case 2:case"end":return e.stop()}}),e)})))()},removePackage:function(e,t){var n=e.commit,a=e.dispatch,r=e.getters;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n("setLoading",!0),e.abrupt("return",r.token.then((function(e){return we.get("/admin/index.php?cl=composerman&fnc=removepackage&stoken="+e+"&package="+t).then((function(){return a("loadPackages")}))})));case 2:case"end":return e.stop()}}),e)})))()},getComposerJson:function(e){var t=e.commit,n=e.getters;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t("setLoading",!0),e.abrupt("return",n.token.then((function(e){return we.get("/admin/index.php?cl=composerman&fnc=getcomposerjson&stoken="+e).then((function(e){return t("setComposerJson",e.data),e.data}))})));case 2:case"end":return e.stop()}}),e)})))()},saveComposerJson:function(){return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},runCommand:function(e,t){var n=e.commit,a=e.dispatch,r=e.getters;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n("setLoading",!0),e.abrupt("return",r.token.then((function(e){var n=new FormData;return n.set("stoken",e),n.set("cl","composerman"),n.set("fnc","runcommand"),n.set("cmd",t),we.post("/admin/index.php",n).then((function(e){return a("loadPackages"),e.data}))})));case 2:case"end":return e.stop()}}),e)})))()}},modules:{}});a["a"].config.productionTip=!1,window.vm=new a["a"]({vuetify:ke,store:ye,render:function(e){return e(he)}}).$mount("#app")}});
//# sourceMappingURL=app.c49909fd.js.map